Bootstrap: docker
From: debian:bookworm-20250610-slim

%files
    ./praat_scripts/FilledPauses.praat /usr/local/share/praat/FilledPauses.praat
    ./praat_scripts/syllablenucleiv3.praat /usr/local/share/praat/syllablenucleiv3.praat

%post
    # OS dependencies
    apt update
    apt install -y wget

    # Downloading Praat
    url="https://github.com/praat/praat/releases/download/{{APP_VERSION}}"
    version=$(echo "{{APP_VERSION}}" | tr -cd '0-9')
    praat_tar="{{APP_NAME}}${version}_linux-intel64.tar.gz"
    wget ${url}/${praat_tar}

    # Praat dependencies (https://praat.org/download_linux.html)
    apt install -y libc++1 libgtk-3-0 libpulse0 libasound2 libjack0

    # Praat installation
    tar zxf ${praat_tar} -C /usr/bin

    # cleaning
    rm ${praat_tar}
    apt remove -y wget
    apt autoremove -y

%environment
    export PRAAT_SCRIPTS_DIR="/usr/local/share/praat"
